<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<title>Avery R. Dowd</title>

<link rel="stylesheet" href="style.css">
<link rel="icon" type="image/x-icon" href="images/favicon.ico">

</head>

<body>
    <div id="container">
        <div id="top">
            <div id="name">
                <p href="./" id="nametxt">Avery R. Dowd</p>
            </div>
            <div id="title">
                <p id="titletxt">NYBG Through Poetry</p>
            </div>
        </div>
        <div id="bottom">
            <div id="navigation">
                <div id="contact">
                    <a id="email">averyrdowd@gmail.com</a>
                    <a href="" id="resume" download>[Resume/CV]</a>
                </div>
                <div id="navbtns">
                    <a href="./" id="home">Home</a>
                    <a href="/gallery.html" id="gallery">Gallery</a>
                    <div id="projectsToggle">
                        <button id="projects" type="button" aria-expanded="false" aria-controls="projectsDropdown">
                            Projects
                            <img id="dropdown" src="images/dropdown.svg" alt="">
                        </button>
                    </div>
                    <div id="projectsDropdown" class="projects-dropdown" hidden>
                        <a href="/repetitiontriptych.html" id="proj1" class="allproj">Repetition Triptych</a>
                        <a href="/symbolismtriptych.html" id="proj2" class="allproj">Symbolism Triptych</a>
                        <a href="/typographytriptych.html" id="proj3" class="allproj">Typography Triptych</a>
                        <a href="/silencedcinema.html" id="proj4" class="allproj">Silenced Cinema Ad</a>
                        <a href="/languageandperception.html" id="proj5" class="allproj">Language and Perception</a>
                        <a href="/nybgthroughpoetry.html" id="proj6" class="allproj">NYBG Through Poetry</a>
                        <a href="/insidethenypl.html" id="proj7" class="allproj">Inside the NYPL</a>
                        <a href="/robertmenus.html" id="proj8" class="allproj">ROBERT Menus</a>
                        <a href="/robertinstagram.html" id="proj9" class="allproj">ROBERT Instagram</a>
                        <a href="/smokingkills.html" id="proj10" class="allproj">Smoking Kills</a>
                        <a href="/buzzingbalance.html" id="proj11" class="allproj">Buzzing Balance</a>
                        <a href="/albumcover.html" id="proj12" class="allproj">Album Cover</a>
                    </div>
                </div>
            </div>
            <div id="info">
                <p id="infotxt">After exploring New York City, three libraries were selected to create books on. Each book had to explore a topic that was found in the library or related to the library.
                    <br>
                    <br>
                    Please explore and interact with the work. Hover for more
                </p>
            </div>
            <div id="imageplaceholder">
            </div>
        </div>
    </div>
    <div id="scroll">
        <div id="txtplaceholder"></div>
        <div id="imagelive" class="fullimg">
            <div class="video-wrapper custom-controls">
                <video class="featured-video" src="images/NYBGBook.mp4" alt="Book Flip Through" playsinline muted autoplay loop></video>
                <div class="video-controls">
                    <button class="video-control-btn play-pause" type="button" aria-pressed="true">Pause</button>
                    <input class="seek-bar" type="range" min="0" max="100" step="0.1" value="0" aria-label="Scrub video">
                    <button class="mute-toggle video-control-btn" type="button" aria-pressed="true">Muted</button>
                </div>
            </div>
        </div>
        <div id="imagelive" class="fullimg">
            <img src="images/nybgzoom2.jpg" alt="Typography Triptych full poster">
        </div>
        <div id="imagelive" class="fullimg">
            <img src="images/nybgspread1.jpg" alt="Typography Triptych full poster">
        </div>
        <div id="imagelive" class="fullimg">
            <img src="images/nybgzoom3.jpg" alt="Typography Triptych full poster">
        </div>
        <div id="imagelive" class="fullimg">
            <img src="images/nybgspread5.jpg" alt="Typography Triptych full poster">
        </div>
        <div id="imagelive" class="fullimg">
            <img src="images/nybgzoom5.jpg" alt="Typography Triptych full poster">
        </div>
        
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const toggleButton = document.getElementById('projects');
            const dropdown = document.getElementById('projectsDropdown');
            if (toggleButton && dropdown) {
                const path = window.location.pathname;
                const onIndex = /\/(?:index\.html)?$/.test(path);
                if (!onIndex) {
                    dropdown.classList.add('is-open');
                    dropdown.hidden = false;
                    toggleButton.setAttribute('aria-expanded', 'true');
                    toggleButton.classList.add('is-open');
                }

                toggleButton.addEventListener('click', function () {
                    const isOpen = dropdown.classList.toggle('is-open');
                    dropdown.hidden = !isOpen;
                    toggleButton.setAttribute('aria-expanded', isOpen ? 'true' : 'false');
                    toggleButton.classList.toggle('is-open', isOpen);
                });
            }

            document.querySelectorAll('.video-wrapper.custom-controls').forEach(wrapper => {
                const video = wrapper.querySelector('.featured-video');
                const playPauseBtn = wrapper.querySelector('.play-pause');
                const muteBtn = wrapper.querySelector('.mute-toggle');
                const seekBar = wrapper.querySelector('.seek-bar');
                if (!video || !playPauseBtn || !muteBtn || !seekBar) {
                    return;
                }

                const safePlay = () => {
                    const playPromise = video.play();
                    if (playPromise && playPromise.catch) {
                        playPromise.catch(() => {});
                    }
                };

                const updatePlayPause = () => {
                    const paused = video.paused;
                    playPauseBtn.textContent = paused ? 'Play' : 'Pause';
                    playPauseBtn.setAttribute('aria-pressed', (!paused).toString());
                };

                const updateMute = () => {
                    const muted = video.muted;
                    muteBtn.textContent = muted ? 'Muted' : 'Sound';
                    muteBtn.setAttribute('aria-pressed', (!muted).toString());
                };

                const updateSeek = () => {
                    if (!video.duration) {
                        return;
                    }
                    const progress = (video.currentTime / video.duration) * 100;
                    seekBar.value = progress;
                };

                video.autoplay = true;
                video.loop = true;
                video.muted = true;
                video.playsInline = true;
                safePlay();

                video.addEventListener('timeupdate', updateSeek);
                video.addEventListener('loadedmetadata', updateSeek);
                video.addEventListener('play', updatePlayPause);
                video.addEventListener('pause', updatePlayPause);

                playPauseBtn.addEventListener('click', function () {
                    if (video.paused) {
                        safePlay();
                    } else {
                        video.pause();
                    }
                    updatePlayPause();
                });

                muteBtn.addEventListener('click', function () {
                    video.muted = !video.muted;
                    if (!video.muted) {
                        safePlay();
                    }
                    updateMute();
                });

                seekBar.addEventListener('input', function () {
                    if (!video.duration) {
                        return;
                    }
                    const newTime = (seekBar.value / 100) * video.duration;
                    video.currentTime = newTime;
                });

                updatePlayPause();
                updateMute();
                updateSeek();
            });
        });
    </script>
</body>
</html>
